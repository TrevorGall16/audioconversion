<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Convert AAC to WAV online for free. Get uncompressed audio quality from your AAC files.">
    <meta name="keywords" content="audio converter, mp3 converter, wav converter, audio format converter, free audio converter">
    <link rel="canonical" href="/aac-to-wav/">
    <title>AAC to WAV Converter - Convert Apple Audio to WAV</title>
    
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="apple-mobile-web-app-title" content="AudioConverter" />

    <meta name="google-site-verification" content="6-KQgsyvigvOEMKCs9VP4Byh0hMKej1CLRlowGGJtmc" />

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f8f9fa;
            background-image: radial-gradient(circle at 20% 30%, rgba(120, 119, 198, 0.05) 0%, transparent 50%),
                              radial-gradient(circle at 80% 70%, rgba(138, 43, 226, 0.04) 0%, transparent 50%);
            min-height: 100vh;
            padding: 40px 20px 60px;
            color: #1e293b;
            letter-spacing: -0.025em;
        }
        .container { max-width: 1280px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 48px; }
        header a { text-decoration: none; color: inherit; }
        h1 { font-size: 3.5rem; font-weight: 700; margin-bottom: 12px; color: #0f172a; line-height: 1.1; letter-spacing: -0.04em; }
        .subtitle { font-size: 1.25rem; color: #64748b; font-weight: 400; letter-spacing: -0.02em; }
        .main-content { display: grid; grid-template-columns: 1fr; gap: 32px; }
        @media (min-width: 1024px) { .main-content { grid-template-columns: 1fr 340px; } }
        
        .conversion-section {
            background: white;
            border-radius: 24px;
            padding: 48px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05), 0 20px 40px rgba(0,0,0,0.03);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
        
        .conversion-section h2 {
            margin-bottom: 32px;
            color: #0f172a;
            font-size: 1.75rem;
            font-weight: 700;
            letter-spacing: -0.03em;
        }
        
        .upload-area {
            border: 2px dashed #cbd5e1;
            border-radius: 24px;
            padding: 64px 32px;
            text-align: center;
            background: #f8fafc;
            margin-bottom: 32px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .upload-area:hover { border-color: #94a3b8; background: #f1f5f9; }
        .upload-area.drag-over { background: #f1f5f9; border-color: #64748b; }
        .upload-icon { font-size: 4rem; margin-bottom: 20px; opacity: 0.6; }
        .upload-text { font-size: 1.25rem; color: #475569; margin-bottom: 12px; font-weight: 500; }
        
        .browse-btn {
            padding: 14px 32px;
            background: #0f172a;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            margin: 16px 0;
            box-shadow: 0 2px 8px rgba(15, 23, 42, 0.12);
            transition: all 0.2s ease;
        }
        .browse-btn:hover { background: #1e293b; transform: translateY(-1px); }

        .file-info {
            background: #f1f5f9;
            padding: 20px 24px;
            border-radius: 16px;
            margin-bottom: 28px;
            display: none;
            border: 1px solid #e2e8f0;
            color: #475569;
        }
        .file-info.active { display: block; }

        .format-selection {
            margin-bottom: 32px;
        }
        .format-selection label {
            display: block;
            font-weight: 600;
            margin-bottom: 12px;
            color: #1e293b;
            font-size: 1.1rem;
        }
        .format-selection select {
            width: 100%;
            padding: 16px 20px;
            font-size: 1.05rem;
            border: 1px solid #e2e8f0;
            border-radius: 16px;
            background: white;
            cursor: pointer;
            color: #1e293b;
            font-weight: 500;
        }

        .convert-btn {
            width: 100%;
            padding: 18px 32px;
            background: #0f172a;
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.15rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 12px rgba(15, 23, 42, 0.15);
        }
        .convert-btn:hover:not(:disabled) { background: #1e293b; transform: translateY(-1px); }
        .convert-btn:disabled { background: #cbd5e1; cursor: not-allowed; box-shadow: none; }

        .progress-container { margin: 24px 0; display: none; }
        .progress-container.active { display: block; }
        .progress-bar {
            width: 100%; height: 48px; background: #f1f5f9;
            border-radius: 12px; overflow: hidden; border: 1px solid #e2e8f0;
            position: relative;
        }
        .progress-fill {
            height: 100%; background: linear-gradient(90deg, #0f172a 0%, #1e293b 100%);
            width: 0%; transition: width 0.3s ease;
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: 600; font-size: 1.05rem;
        }

        .result-section { display: none; text-align: center; margin-top: 28px; }
        .result-section.active { display: block; }
        .result-card {
            background: #f8fef9;
            padding: 28px;
            border-radius: 16px;
            border: 2px solid #86efac;
        }
        .success-icon { font-size: 3.5rem; margin-bottom: 16px; }
        .result-text { font-size: 1.25rem; color: #166534; margin-bottom: 24px; font-weight: 600; }
        
        .download-btn {
            width: 100%; padding: 18px; background: #166534; color: white;
            border: none; border-radius: 12px; font-weight: 600; font-size: 1.1rem;
            cursor: pointer; margin-bottom: 16px; transition: all 0.2s ease;
        }
        .download-btn:hover { background: #15803d; transform: translateY(-1px); }
        
        .new-conversion-btn {
            background: white;
            color: #0f172a;
            border: 2px solid #e2e8f0;
            padding: 14px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
        }
        .new-conversion-btn:hover { background: #f8f9fa; }

        .error-message {
            background: #fef2f2; color: #991b1b; padding: 16px 20px;
            border-radius: 12px; margin-bottom: 20px; display: none;
            border: 2px solid #fca5a5; font-weight: 500;
        }
        .error-message.active { display: block; }

        /* Sidebar */
        .sidebar { display: flex; flex-direction: column; gap: 24px; }
        .info-card, .features-box {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05), 0 10px 20px rgba(0,0,0,0.02);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
        .info-card h3, .features-box h3 {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: #0f172a;
            font-weight: 700;
        }
        .feature-list {
            list-style: none;
        }
        .feature-list li {
            padding: 14px 0;
            border-bottom: 1px solid #f1f5f9;
            color: #475569;
            font-size: 1rem;
            line-height: 1.6;
        }
        .feature-list li:last-child { border-bottom: none; }
        .feature-list li::before {
            content: "‚úì";
            color: #22c55e;
            font-weight: bold;
            margin-right: 12px;
            font-size: 1.2rem;
        }

        /* Educational Content */
        .educational-content {
            background: white;
            border-radius: 24px;
            padding: 48px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05), 0 20px 40px rgba(0,0,0,0.03);
            border: 1px solid rgba(226, 232, 240, 0.8);
            margin-top: 32px;
        }
        .educational-content h2 {
            font-size: 1.75rem;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 24px;
            letter-spacing: -0.03em;
        }
        .educational-content h3 {
            font-size: 1.35rem;
            font-weight: 600;
            color: #1e293b;
            margin-top: 28px;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
        }
        .educational-content p {
            font-size: 1.05rem;
            line-height: 1.8;
            color: #475569;
            margin-bottom: 20px;
        }
        .educational-content ul {
            margin: 20px 0;
            padding-left: 28px;
        }
        .educational-content li {
            font-size: 1.05rem;
            line-height: 1.8;
            color: #475569;
            margin-bottom: 12px;
        }

        .use-case-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }
        .use-case-card {
            background: #f8fafc;
            border-radius: 16px;
            padding: 24px;
            border: 1px solid #e2e8f0;
        }
        .use-case-card h4 {
            font-size: 1.15rem;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 12px;
        }
        .use-case-card p {
            font-size: 0.98rem;
            line-height: 1.7;
            color: #64748b;
            margin-bottom: 0;
        }

        /* Ad Container */
        .ad-container {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 1px solid #e2e8f0;
            min-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        footer {
            max-width: 1280px;
            margin: 60px auto 0;
            padding: 32px 20px;
            text-align: center;
            color: #64748b;
            font-size: 0.9rem;
        }
        /* Info Bar Navigation - With Icons & Boxes */
        .info-bar {
            background: white;
            padding: 16px 0;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            margin-bottom: 32px;
            border-radius: 20px;
            border: 1px solid #e2e8f0;
        }

        .info-bar-links {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 12px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .info-bar-link {
            color: #475569;
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
            padding: 10px 20px;
            border-radius: 12px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
        }

        .info-bar-link:hover {
            background: #f1f5f9;
            color: #0f172a;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            text-decoration: none;
        }

        .info-bar-icon {
            font-size: 1.1rem;
        }

        .nav-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 16px;
            justify-content: center;
        }
        .nav-links a {
            color: #64748b;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }
        .nav-links a:hover { color: #0f172a; }

        /* Mobile */
        @media (max-width: 768px) {
            body { padding: 24px 16px 40px; }
            h1 { font-size: 2.5rem; }
            .subtitle { font-size: 1.1rem; }
            .conversion-section, .info-card, .educational-content { padding: 32px 24px; }
            .upload-area { padding: 48px 20px; }
            .use-case-grid { grid-template-columns: 1fr; }
            .info-bar-links { gap: 8px; }
            .info-bar-link {
                font-size: 0.85rem;
                padding: 8px 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="/">
                <h1>üéµ Free Audio Converter</h1>
                <p class="subtitle">Fast, Private, Browser-Based Audio Format Conversion</p>
            </a>
        </header>

        <div class="info-bar">
            <div class="info-bar-links">
                <a href="/" class="info-bar-link">
                    <span class="info-bar-icon">üè†</span>
                    <span>Home</span>
                </a>
                <a href="/audio-knowledge/" class="info-bar-link">
                    <span class="info-bar-icon">üìö</span>
                    <span>Audio Knowledge & FAQ</span>
                </a>
                <a href="/formats-details.html" class="info-bar-link">
                    <span class="info-bar-icon">üìã</span>
                    <span>Audio Format Details</span>
                </a>
                <a href="/privacy-policy.html" class="info-bar-link">
                    <span class="info-bar-icon">üîí</span>
                    <span>Privacy Policy</span>
                </a>
            </div>
        </div>
<div style="display: flex; justify-content: center; margin-bottom: 40px; margin-top: -10px;">
            <script type="text/javascript">
                atOptions = {
                    'key' : 'd4eba9478fc2c0e9d207fd7a3c021d55',
                    'format' : 'iframe',
                    'height' : 90,
                    'width' : 728,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="https://www.highperformanceformat.com/d4eba9478fc2c0e9d207fd7a3c021d55/invoke.js"></script>
        </div>
        <div class="main-content">
            <div>
                <div class="conversion-section">
                    <h2>Upload & Convert Your Audio</h2>
                    <div style="display: flex; justify-content: center; margin-bottom: 20px;">
                        <script>
                          atOptions = {
                            'key' : '05d0e9b58c013b9da55a137fc3ddb730',
                            'format' : 'iframe',
                            'height' : 60,
                            'width' : 468,
                            'params' : {}
                          };
                        </script>
                        <script src="https://www.highperformanceformat.com/05d0e9b58c013b9da55a137fc3ddb730/invoke.js"></script>
                    </div>
                    <div class="error-message" id="errorMessage"></div>

                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÅ</div>
                        <div class="upload-text">Drag & Drop your audio file here</div>
                        <div style="margin: 15px 0; color: #94a3b8;">or</div>
                        
                        <button type="button" class="browse-btn" onclick="document.getElementById('fileInput').click()">
                            Browse Files
                        </button>
                        <input type="file" id="fileInput" accept="audio/*" style="display: none;">
                        <div style="margin-top: 12px; font-size: 0.9rem; color: #94a3b8;">Max file size: 50MB</div>
                    </div>

                    <div class="file-info" id="fileInfo">
                        <strong>Selected File:</strong> <span id="fileName"></span><br>
                        <strong>Size:</strong> <span id="fileSize"></span>
                    </div>

                    <div class="format-selection">
                        <label>Convert to format:</label>
                        <select id="outputFormat">
                            <option value="mp3">MP3 - Universal Compatibility</option>
                            <option value="wav">WAV - Uncompressed Quality</option>
                            <option value="flac">FLAC - Lossless Compression</option>
                            <option value="aac">AAC - High Efficiency</option>
                            <option value="m4a">M4A - Apple Devices</option>
                            <option value="ogg">OGG - Open Format</option>
                        </select>
                    </div>

                    <button type="button" class="convert-btn" id="convertBtn" disabled>
                        Convert Now
                    </button>

                    <div class="progress-container" id="progressContainer">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill">0%</div>
                        </div>
                        <div style="text-align: center; color: #64748b; margin-top: 12px; font-weight: 500;">
                            Converting your audio file...
                        </div>
                    </div>

                    <div class="result-section" id="resultSection">
                        <div class="result-card">
                            <div class="success-icon">‚úÖ</div>
                            <div class="result-text">Conversion Complete!</div>
                            <button class="download-btn" onclick="downloadFile()">
                                üì• Download Converted File
                            </button>
                            <button class="new-conversion-btn" onclick="location.reload()">
                                Convert Another File
                            </button>
                        </div>
                    </div>
                </div>

                <div style="margin: 30px 0; display: flex; justify-content: center;">
                    <script async="async" data-cfasync="false" src="https://pl28362942.effectivegatecpm.com/e47ed53060fddab9bd61ace6c036baf8/invoke.js"></script>
                    <div id="container-e47ed53060fddab9bd61ace6c036baf8"></div>
                </div>

                <div class="educational-content">
                    <h2>Understanding Audio Format Conversion</h2>
                    
                    <p>Audio format conversion is the process of transforming audio files from one codec or container format to another. This process is essential for ensuring compatibility across different devices, applications, and use cases. Whether you're a podcaster preparing content for distribution, a musician sharing demos, or simply organizing your personal music library, understanding audio conversion helps you make informed decisions about quality, file size, and compatibility.</p>

                    <h3>Why Convert Audio Formats?</h3>
                    <p>Different audio formats serve different purposes. Lossless formats like FLAC and WAV preserve every detail of the original recording, making them ideal for archival purposes and professional audio work. However, they create large files that consume significant storage space. Compressed formats like MP3 and AAC reduce file sizes dramatically through perceptual coding, removing audio information that human ears typically cannot detect. This makes them perfect for portable devices and streaming applications where storage and bandwidth are limited.</p>

                    <h3>Common Audio Conversion Scenarios</h3>
                    <div class="use-case-grid">
                        <div class="use-case-card">
                            <h4>Podcast Production</h4>
                            <p>Podcasters typically record in high-quality WAV format but convert to MP3 (128-192 kbps) for distribution. This balances audio quality with file size, ensuring listeners can download episodes quickly without sacrificing clarity of spoken content.</p>
                        </div>
                        <div class="use-case-card">
                            <h4>Music Archiving</h4>
                            <p>Audiophiles and music collectors often convert CD audio to FLAC format, which compresses files by 40-50% without any quality loss. This preserves the original recording while saving storage space compared to uncompressed WAV files.</p>
                        </div>
                        <div class="use-case-card">
                            <h4>Device Compatibility</h4>
                            <p>Older car stereos and MP3 players may not support modern formats like M4A or OGG. Converting these files to MP3 ensures your entire audio library plays seamlessly on any device, regardless of age or manufacturer.</p>
                        </div>
                        <div class="use-case-card">
                            <h4>File Size Reduction</h4>
                            <p>When email attachments or cloud storage limits are a concern, converting high-quality audio to smaller formats becomes necessary. A 40MB WAV file can become a 4MB MP3 file while maintaining acceptable quality for most listening situations.</p>
                        </div>
                    </div>

                    <h3>Quality Considerations</h3>
                    <p>When converting between audio formats, understanding the concept of lossy versus lossless compression is crucial. Lossless formats (FLAC, ALAC, WAV) preserve the original audio data completely, allowing you to convert back and forth without degradation. Lossy formats (MP3, AAC, OGG) permanently discard some audio information to achieve smaller file sizes. Converting from one lossy format to another compounds quality loss, so it's best to keep original high-quality versions when possible.</p>

                    <p>Bitrate selection significantly impacts both quality and file size. For music, 320 kbps MP3 is considered transparent to most listeners, meaning it's indistinguishable from the original. For spoken content like podcasts or audiobooks, 96-128 kbps provides excellent clarity while minimizing file size. Voice-only recordings can use even lower bitrates (64 kbps) without noticeable quality degradation.</p>

                    <h3>Technical Insights: How Conversion Works</h3>
                    <p>Audio conversion involves decoding the source format into raw audio data (PCM samples), then encoding it into the target format using the selected codec. Modern converters like this one use FFmpeg, an industry-standard multimedia framework that supports virtually every audio format. The conversion process preserves metadata like artist names, album titles, and embedded artwork when the target format supports such information.</p>

                    <p>Sample rate and bit depth are fundamental properties that define audio quality. CD-quality audio uses 44.1 kHz sample rate and 16-bit depth. Higher rates (96 kHz, 192 kHz) and depths (24-bit) capture more audio information but create proportionally larger files. Most conversion tools automatically match the source file's properties or allow you to specify these parameters for precise control over the output.</p>

                    <h3>Privacy and Security</h3>
                    <p>Online audio converters vary significantly in how they handle your files. Browser-based converters that process files locally (client-side) offer maximum privacy because your audio never leaves your device. Server-based converters upload files for processing, which may pose privacy concerns for sensitive content. This tool processes conversions on our server but immediately deletes files after conversion, ensuring your audio content remains private and secure.</p>

                    <h3>Best Practices for Audio Conversion</h3>
                    <p>Always keep your original high-quality source files archived. Converting creates a copy in the new format, leaving your original intact. This allows you to create different versions for different purposes without re-ripping or re-recording. For example, maintain FLAC versions at home while creating MP3 versions for portable devices.</p>

                    <p>Match your format to your use case. Use lossless formats for editing, archival, and critical listening. Use lossy formats for everyday listening, sharing, and storage-constrained situations. Consider OGG Vorbis or Opus for streaming applications, as they offer better quality-to-bitrate ratios than MP3. AAC provides excellent quality for Apple ecosystem devices and modern applications.</p>
                </div>
            </div>

            <aside class="sidebar">
                <div style="display: flex; justify-content: center; margin-bottom: 25px;">
                    <script type="text/javascript">
                        atOptions = {
                            'key' : 'fd100a56284a7742ca2c8f546b7e338a',
                            'format' : 'iframe',
                            'height' : 250,
                            'width' : 300,
                            'params' : {}
                        };
                    </script>
                    <script type="text/javascript" src="https://www.highperformanceformat.com/fd100a56284a7742ca2c8f546b7e338a/invoke.js"></script>
                </div>

                <div class="features-box">
                    <h3>‚ú® Features</h3>
                    <ul class="feature-list">
                        <li>Free & Unlimited</li>
                        <li>Secure (Files deleted instantly)</li>
                        <li>High Quality (FFmpeg powered)</li>
                        <li>Works on Mobile & Desktop</li>
                    </ul>
                </div>
            </aside>
        </div> </div> <footer>
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="/audio-knowledge/">Audio Knowledge & FAQ</a>
            <a href="/formats-details.html">Audio Format Details</a>
            <a href="/privacy-policy.html">Privacy Policy</a>
            <a href="/legal-disclaimer.html">Legal Disclaimer</a>
        </div>
        <p>&copy; 2024 Free Audio Converter. Fast, private audio conversion tool.</p>
    </footer>

    <script>
        // ===== SIMPLE, WORKING JAVASCRIPT - NO FANCY TRICKS =====
        let selectedFile = null;
        let convertedFileUrl = null;

        const fileInput = document.getElementById('fileInput');
        const uploadArea = document.getElementById('uploadArea');
        const convertBtn = document.getElementById('convertBtn');
        const errorMessage = document.getElementById('errorMessage');

        // Click handler for upload area
        uploadArea.addEventListener('click', () => fileInput.click());

        // Drag & Drop handlers
        uploadArea.addEventListener('dragover', (e) => { 
            e.preventDefault(); 
            uploadArea.classList.add('drag-over');
        });
        uploadArea.addEventListener('dragleave', () => { 
            uploadArea.classList.remove('drag-over');
        });
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('drag-over');
            if (e.dataTransfer.files.length) handleFile(e.dataTransfer.files[0]);
        });

        // File input handler
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length) handleFile(e.target.files[0]);
        });

        function handleFile(file) {
            // Validate file size (50MB limit)
            const maxSize = 50 * 1024 * 1024;
            if (file.size > maxSize) {
                errorMessage.textContent = '‚ùå File too large! Maximum size is 50MB.';
                errorMessage.classList.add('active');
                return;
            }

            selectedFile = file;
            document.getElementById('fileName').textContent = file.name;
            document.getElementById('fileSize').textContent = formatFileSize(file.size);
            document.getElementById('fileInfo').classList.add('active');
            convertBtn.disabled = false;
            errorMessage.classList.remove('active');
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        // SIMPLE CONVERSION - No fake progress, just real feedback
        convertBtn.addEventListener('click', async function startConversion() {
            if (!selectedFile) return;

            // UI Update
            convertBtn.disabled = true;
            convertBtn.textContent = "Converting...";
            document.getElementById('progressContainer').classList.add('active');
            document.getElementById('resultSection').classList.remove('active');
            errorMessage.classList.remove('active');

            // Show 10% immediately so user knows something is happening
            updateProgress(10);

            const formData = new FormData();
            formData.append('audioFile', selectedFile);
            formData.append('format', document.getElementById('outputFormat').value);

            try {
                // THE ACTUAL REQUEST (simple, no wrappers)
                const response = await fetch('/convert', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    let msg = 'Conversion failed';
                    try { 
                        const data = await response.json(); 
                        msg = data.message || msg; 
                    } catch(e) {}
                    throw new Error(msg);
                }

                // Success! Jump to 100%
                updateProgress(100);
                const blob = await response.blob();
                convertedFileUrl = URL.createObjectURL(blob);

                // Show result
                document.getElementById('progressContainer').classList.remove('active');
                document.getElementById('resultSection').classList.add('active');

            } catch (error) {
                console.error('Conversion error:', error);
                errorMessage.textContent = "‚ùå " + error.message;
                errorMessage.classList.add('active');
                document.getElementById('progressContainer').classList.remove('active');
                convertBtn.disabled = false;
                convertBtn.textContent = "Convert Now";
                updateProgress(0);
            }
        });

        function updateProgress(percent) {
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = percent + '%';
            progressFill.textContent = Math.round(percent) + '%';
        }

        function downloadFile() {
            if (!convertedFileUrl) return;
            
            const outputFormat = document.getElementById('outputFormat').value;
            const originalName = selectedFile.name;
            const lastDotIndex = originalName.lastIndexOf('.');
            const nameWithoutExt = lastDotIndex > 0 ? originalName.substring(0, lastDotIndex) : originalName;
            const sanitized = nameWithoutExt.replace(/[^a-zA-Z0-9\s\-_]/g, '').trim();

            const a = document.createElement('a');
            a.href = convertedFileUrl;
            a.download = `${sanitized}_converted.${outputFormat}`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
    <script src="https://pl28379552.effectivegatecpm.com/04/60/59/046059e670d164f784b22304c4c2a92b.js"></script>
</body>
</html>