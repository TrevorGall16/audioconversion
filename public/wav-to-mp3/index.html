<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Convert WAV files to MP3 format for free. Reduce file size while maintaining quality.">
    <meta name="keywords" content="audio converter, mp3 converter, wav converter, audio format converter, free audio converter">
    <link rel="canonical" href="/wav-to-mp3/">
    <title>WAV to MP3 Converter - Free Online Audio Converter</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px 0;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        @media (min-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr 300px;
            }
        }

        .conversion-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .upload-area {
            border: 3px dashed #667eea;
            border-radius: 8px;
            padding: 50px 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #f8f9ff;
            margin-bottom: 25px;
        }

        .upload-area.drag-over {
            background: #e8ebff;
            border-color: #764ba2;
            transform: scale(1.02);
        }

        .upload-area:hover {
            background: #f0f2ff;
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .upload-text {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 10px;
        }

        .file-info {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .file-info.active {
            display: block;
        }

        .format-selection {
            margin-bottom: 25px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #444;
        }

        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        select:focus {
            outline: none;
            border-color: #667eea;
        }

        .convert-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 20px;
        }

        .convert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .convert-btn:active {
            transform: translateY(0);
        }

        .convert-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .progress-container {
            display: none;
            margin-bottom: 20px;
        }

        .progress-container.active {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .result-section {
            display: none;
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .result-section.active {
            display: block;
        }

        .download-btn {
            width: 100%;
            padding: 15px;
            background: #4caf50;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 10px;
            transition: background 0.3s;
        }

        .download-btn:hover {
            background: #45a049;
        }

        .convert-again-btn {
            width: 100%;
            padding: 12px;
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .convert-again-btn:hover {
            background: #667eea;
            color: white;
        }

        /* ============================================
           AD COLLAPSE RULE (CLS Prevention)
           ============================================
           When AdSense sets data-ad-status="unfilled", visually
           collapse the ad slot while preserving parent min-height.
           This prevents layout shift while hiding empty ads.
           ============================================ */
        ins.adsbygoogle[data-ad-status="unfilled"] {
            display: none !important;
            border: none !important;
            background: none !important;
            padding: 0 !important;
            margin: 0 !important;
            min-height: 0 !important;
            height: 0 !important;
        }

        /* Parent container maintains reserved space */
        .ad-container {
            min-height: 250px; /* Reserved for CLS prevention */
        }

        .ad-container:has(ins[data-ad-status="unfilled"]) {
            min-height: 0; /* Collapse parent when ad unfilled */
            margin-bottom: 0;
        }

        /* ============================================
           DEBUG MODE FOR AD DEVELOPMENT
           ============================================
           All 4 ad containers are FORCED VISIBLE for layout verification.
           Comment out this entire section when deploying to production.
           ============================================ */

        /* Base ad container - visible with red border */
        .ad-container {
            background: white;
            border: 3px solid #FF6B6B;
            border-radius: 8px;
            display: block !important; /* FIXED: Changed from flex to block */
            visibility: visible !important;
            opacity: 1 !important;
            color: #FF6B6B;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            padding: 20px;
        }

        /* Force all ad containers visible - override any JS or class changes */
        #ad-banner-1,
        #ad-banner-2,
        #ad-sidebar,
        .inline-ad {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            border: 3px solid red !important;
        }

        /* Banner ads - full width, red border */
        #ad-banner-1,
        #ad-banner-2 {
            min-height: 250px !important;
            width: 100%;
        }

        /* Override active class behavior during debug */
        #ad-banner-2.active,
        .inline-ad.active {
            display: block !important;
        }

        /* Sidebar - tall vertical ad with cyan border */
        #ad-sidebar {
            min-height: 600px !important;
            background: white;
            border: 3px solid #4ECDC4 !important;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            display: block !important; /* TESTING: Always visible on all screens */
        }

        /* Force sidebar visible on ALL screen sizes during debug */
        @media (max-width: 1023px) {
            #ad-sidebar {
                display: block !important;
            }
        }

        /* Desktop sidebar normal behavior */
        @media (min-width: 1024px) {
            #ad-sidebar {
                display: block !important;
            }
        }

        /* Inline ad - smaller, yellow border for distinction */
        .inline-ad {
            min-height: 100px !important;
            margin: 15px 0;
            border: 3px solid #FFD700 !important;
        }

        /* END DEBUG MODE */

        /* Features Section */
        .features {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .features h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-item {
            padding: 20px;
            background: #f8f9ff;
            border-radius: 8px;
        }

        .feature-item h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .feature-item p {
            color: #666;
            line-height: 1.6;
        }

        footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            padding: 20px;
            opacity: 0.9;
        }

        /* Consent Modal */
        .consent-modal {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 20px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
        }

        .consent-modal.active {
            display: block;
        }

        .consent-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        @media (min-width: 768px) {
            .consent-content {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
            }
        }

        .consent-text {
            flex: 1;
            color: #333;
            line-height: 1.6;
        }

        .consent-buttons {
            display: flex;
            gap: 10px;
        }

        .consent-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .consent-accept {
            background: #4caf50;
            color: white;
        }

        .consent-accept:hover {
            background: #45a049;
        }

        .consent-decline {
            background: #f5f5f5;
            color: #333;
        }

        .consent-decline:hover {
            background: #e0e0e0;
        }

        .hidden {
            display: none !important;
        }

        input[type="file"] {
            display: none;
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .error-message.active {
            display: block;
        }

        /* Educational Content Sections */
        .content-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .content-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .content-section h3 {
            color: #333;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .content-section p {
            color: #666;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .content-section ul {
            color: #666;
            line-height: 1.8;
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .content-section li {
            margin-bottom: 8px;
        }

        /* Tutorial Steps */
        .tutorial-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .tutorial-step {
            text-align: center;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 8px;
            border: 2px solid #e0e7ff;
        }

        .tutorial-step-number {
            font-size: 2rem;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .tutorial-step-title {
            font-size: 1.2rem;
            color: #333;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .tutorial-step-desc {
            font-size: 0.95rem;
            color: #666;
            line-height: 1.5;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid #e0e7ff;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9ff;
        }

        .comparison-table tr:hover {
            background: #f0f2ff;
        }

        /* FAQ Section */
        .faq-item {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .faq-question {
            font-size: 1.1rem;
            color: #333;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .faq-answer {
            color: #666;
            line-height: 1.7;
        }

        /* Knowledge Terms */
        .knowledge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .knowledge-term {
            padding: 15px;
            background: #f8f9ff;
            border-radius: 8px;
            border: 1px solid #e0e7ff;
        }

        .knowledge-term strong {
            color: #667eea;
            display: block;
            margin-bottom: 8px;
            font-size: 1.05rem;
        }

        .knowledge-term p {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.6;
            margin: 0;
        }

        /* Footer Links */
        footer a {
            color: white;
            text-decoration: underline;
            margin: 0 10px;
        }

        footer a:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <!-- GDPR/CCPA Consent Modal -->
    <div class="consent-modal" id="consentModal">
        <div class="consent-content">
            <div class="consent-text">
                <strong>Cookie Consent:</strong> We use cookies and ads to keep this service free. By clicking "Accept", you consent to our use of cookies and advertisement services.
            </div>
            <div class="consent-buttons">
                <button class="consent-btn consent-accept" onclick="acceptConsent()">Accept</button>
                <button class="consent-btn consent-decline" onclick="declineConsent()">Decline</button>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Convert WAV to MP3</h1>
            <p class="subtitle">Convert MP3, WAV, FLAC, AAC, M4A, OGG - Fast & Simple</p>
        </header>

        <div class="main-content">
            <div class="conversion-area">
                <div class="conversion-section">
                    <h2 style="margin-bottom: 20px; color: #333;">Upload & Convert</h2>

                    <div class="error-message" id="errorMessage"></div>

                    <!-- Upload Area -->
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÅ</div>
                        <div class="upload-text">Drag & Drop your audio file here</div>
                        <div style="margin: 15px 0; color: #999;">or</div>
                        <button style="padding: 10px 30px; background: #667eea; color: white; border: none; border-radius: 6px; font-size: 1rem; cursor: pointer;" onclick="document.getElementById('fileInput').click()">
                            Browse Files
                        </button>
                        <input type="file" id="fileInput" accept="audio/*,.mp3,.wav,.flac,.aac,.m4a,.ogg,.wma">
                        <div style="margin-top: 15px; color: #999; font-size: 0.9rem;">Max file size: 50MB</div>
                    </div>

                    <!-- File Info -->
                    <div class="file-info" id="fileInfo">
                        <strong>Selected file:</strong> <span id="fileName"></span><br>
                        <strong>Size:</strong> <span id="fileSize"></span>
                    </div>

                    <!-- Format Selection -->
                    <div class="format-selection">
                        <label for="outputFormat">Convert to:</label>
                        <select id="outputFormat">
                            <option value="mp3">MP3 (MPEG Audio)</option>
                            <option value="wav">WAV (Waveform Audio)</option>
                            <option value="flac">FLAC (Free Lossless)</option>
                            <option value="aac">AAC (Advanced Audio)</option>
                            <option value="m4a">M4A (MPEG-4 Audio)</option>
                            <option value="ogg">OGG (Ogg Vorbis)</option>
                            <option value="wma">WMA (Windows Media)</option>
                        </select>
                    </div>

                    <!-- Convert Button -->
                    <button class="convert-btn" id="convertBtn" onclick="startConversion()" disabled>
                        Convert Audio File
                    </button>

                    <!-- Progress Bar -->
                    <div class="progress-container" id="progressContainer">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill">0%</div>
                        </div>
                        <div style="text-align: center; color: #666;">Converting your file...</div>
                    </div>

                    <!-- Inline Ad (appears during conversion) -->
                    <div class="ad-container inline-ad" id="inlineAd">
                        <div>
                            üì¢ INLINE AD<br>
                            <small style="font-weight: normal; font-size: 0.9rem;">
                                During Conversion Only ‚Ä¢ 300x250 or 320x50<br>
                                Below Progress Bar
                            </small>
                        </div>
                    </div>

                    <!-- Result Section -->
                    <div class="result-section" id="resultSection">
                        <h3 style="color: #1976d2; margin-bottom: 15px;">‚úÖ Conversion Complete!</h3>
                        <button class="download-btn" id="downloadBtn" onclick="downloadFile()">
                            ‚¨áÔ∏è Download Converted File
                        </button>
                        <button class="convert-again-btn" onclick="resetConverter()">
                            Convert Another File
                        </button>
                    </div>
                </div>

                <!-- 3-Step Tutorial (Priority 2, Item 5) -->
                <section class="content-section">
                    <h2>How to Use This Converter</h2>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="tutorial-step-number">1Ô∏è‚É£</div>
                            <div class="tutorial-step-title">Upload</div>
                            <div class="tutorial-step-desc">Drag & drop your audio file or click "Browse Files" to select it from your device.</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="tutorial-step-number">2Ô∏è‚É£</div>
                            <div class="tutorial-step-title">Choose Format</div>
                            <div class="tutorial-step-desc">Select your desired output format from the dropdown menu (MP3, WAV, FLAC, AAC, etc.).</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="tutorial-step-number">3Ô∏è‚É£</div>
                            <div class="tutorial-step-title">Download</div>
                            <div class="tutorial-step-desc">Click "Convert" and wait a few seconds. Download your converted file instantly.</div>
                        </div>
                    </div>
                </section>

                <!-- Banner Ad #1 (Always visible below conversion box) -->
                <div class="ad-container" id="ad-banner-1">
                    <div>
                        üì¢ AD BANNER #1<br>
                        <small style="font-weight: normal; font-size: 0.9rem;">
                            Always Visible ‚Ä¢ 728x90 (Desktop) / 320x50 (Mobile)<br>
                            Below Conversion Box
                        </small>
                    </div>
                </div>

                <!-- Banner Ad #2 (Shown after conversion) -->
                <div class="ad-container" id="ad-banner-2">
                    <div>
                        üì¢ AD BANNER #2<br>
                        <small style="font-weight: normal; font-size: 0.9rem;">
                            Shown After Conversion ‚Ä¢ 728x90 (Desktop) / 320x50 (Mobile)<br>
                            Mid-Page Position
                        </small>
                    </div>
                </div>

                <!-- How Audio Conversion Works (Priority 1, Item 1) -->
                <section class="content-section">
                    <h2>üìö How Audio Conversion Works</h2>
                    <p>Audio conversion is the process of changing an audio file from one format to another using specialized software called a <strong>codec</strong> (compressor-decompressor). This process involves decoding the original file and re-encoding it into the desired format.</p>

                    <h3>Understanding Audio Formats</h3>
                    <p>Audio formats fall into two main categories:</p>
                    <ul>
                        <li><strong>Compressed Formats (MP3, AAC):</strong> Use lossy compression to reduce file size by removing audio data that humans are less likely to notice. This makes files smaller but permanently removes some audio information.</li>
                        <li><strong>Uncompressed or Lossless Formats (WAV, FLAC):</strong> Preserve all original audio data. WAV stores everything without compression, while FLAC compresses without losing quality (like a ZIP file for audio).</li>
                    </ul>

                    <h3>When Is Quality Lost?</h3>
                    <p><strong>Lossy Conversion:</strong> Converting from any format to MP3, AAC, or OGG results in quality loss because these formats discard audio data to achieve smaller file sizes.</p>
                    <p><strong>Lossless Conversion:</strong> Converting from WAV to FLAC (or vice versa) preserves perfect quality because both formats retain all audio data. However, converting from MP3 to WAV won't restore lost quality‚Äîit just creates a larger file with the same limited quality.</p>

                    <h3>Format Comparison</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Format</th>
                                <th>Type</th>
                                <th>Typical Use</th>
                                <th>Quality</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>MP3</strong></td>
                                <td>Lossy Compressed</td>
                                <td>Music players, streaming, general use</td>
                                <td>Good (some data removed)</td>
                            </tr>
                            <tr>
                                <td><strong>WAV</strong></td>
                                <td>Uncompressed</td>
                                <td>Professional editing, studio recording</td>
                                <td>Perfect (no compression)</td>
                            </tr>
                            <tr>
                                <td><strong>FLAC</strong></td>
                                <td>Lossless Compressed</td>
                                <td>Archiving, audiophile collections</td>
                                <td>Perfect (compressed but no loss)</td>
                            </tr>
                            <tr>
                                <td><strong>AAC</strong></td>
                                <td>Lossy Compressed</td>
                                <td>Apple devices, streaming platforms</td>
                                <td>Better than MP3 at same bitrate</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><a href="/formats-details.html" style="color: #667eea; font-weight: 600;">‚Üí Learn more about audio formats and technical details</a></p>
                </section>

                <!-- FAQ Section (Priority 2, Item 6) -->
                <section class="content-section">
                    <h2>‚ùì Frequently Asked Questions</h2>

                    <div class="faq-item">
                        <div class="faq-question">Does converting MP3 to WAV improve quality?</div>
                        <div class="faq-answer">No. Converting MP3 to WAV does not improve quality. MP3 is a lossy format that permanently removes audio data during compression. Converting it to WAV only creates a larger file with the same limited quality. The lost data cannot be recovered.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">What is lossless audio?</div>
                        <div class="faq-answer">Lossless audio formats (like FLAC and WAV) preserve all original audio data without any quality loss. FLAC uses compression similar to ZIP files, reducing file size without removing data. WAV stores audio completely uncompressed.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">Which format is best for music production?</div>
                        <div class="faq-answer">WAV or FLAC are best for music production and editing. These lossless formats preserve all audio data, giving you the highest quality for processing and editing. Use MP3 or AAC only for final distribution.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">Are my files stored on your server?</div>
                        <div class="faq-answer">No. All files are automatically deleted immediately after conversion completes. We do not store, retain, or have access to your files after you download them. <a href="/file-handling.html" style="color: #667eea;">Learn more about our privacy policy</a>.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">What's the difference between bitrate and sample rate?</div>
                        <div class="faq-answer">Bitrate (measured in kbps) determines how much data is used per second of audio‚Äîhigher bitrate means better quality but larger files. Sample rate (measured in Hz) determines how many times per second the audio is measured‚ÄîCD quality is 44.1 kHz.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">Can I convert protected or DRM files?</div>
                        <div class="faq-answer">No. This converter cannot process files with DRM (Digital Rights Management) protection. You can only convert files you legally own or have permission to modify.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">Why is my converted file larger than the original?</div>
                        <div class="faq-answer">Converting from a compressed format (like MP3) to an uncompressed format (like WAV) results in much larger files because WAV stores all audio data without compression. The quality remains the same as the original MP3‚Äîonly the file size increases.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">What's the maximum file size I can convert?</div>
                        <div class="faq-answer">The maximum file size is 50MB. This limit ensures fast conversion times and prevents server overload. For most audio files, this allows 30-60 minutes of audio depending on the format and quality.</div>
                    </div>
                </section>

                <!-- Audio Knowledge Basics (Priority 3, Item 7) -->
                <section class="content-section">
                    <h2>üéì Audio Knowledge Basics</h2>
                    <p>Understanding these fundamental audio terms will help you make better decisions when converting files:</p>

                    <div class="knowledge-grid">
                        <div class="knowledge-term">
                            <strong>Bitrate</strong>
                            <p>The amount of data processed per second, measured in kbps (kilobits per second). Higher bitrate means better quality but larger file size.</p>
                        </div>

                        <div class="knowledge-term">
                            <strong>Sample Rate</strong>
                            <p>How many times per second audio is measured, expressed in Hz (Hertz). CD quality is 44.1 kHz, meaning 44,100 measurements per second.</p>
                        </div>

                        <div class="knowledge-term">
                            <strong>Channels</strong>
                            <p>Number of independent audio signals. Mono has 1 channel, stereo has 2 channels (left and right), and surround sound has 5 or more channels.</p>
                        </div>

                        <div class="knowledge-term">
                            <strong>Dynamic Range</strong>
                            <p>The difference between the quietest and loudest sounds in an audio file. Greater dynamic range provides more detail and realism.</p>
                        </div>

                        <div class="knowledge-term">
                            <strong>Codec</strong>
                            <p>Software that compresses (encodes) and decompresses (decodes) audio data. Examples include MP3, AAC, and FLAC codecs.</p>
                        </div>
                    </div>
                </section>

                <!-- Features Section (Priority 4, Item 8 - Improved) -->
                <section class="features">
                    <h2>Why Choose Our Audio Converter?</h2>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <h3>üöÄ Lightning Fast Conversion</h3>
                            <p><strong>How it works:</strong> Our powerful servers use FFmpeg, the industry-standard audio processing engine used by professionals worldwide. Server-side processing means your files are converted faster than browser-based tools, typically completing in seconds regardless of your device's power.</p>
                        </div>
                        <div class="feature-item">
                            <h3>üîí Maximum Security & Privacy</h3>
                            <p><strong>Your privacy guaranteed:</strong> Files are automatically deleted from our servers immediately after you download them. We use encrypted HTTPS connections for all uploads and downloads. No user accounts, no tracking, no data retention‚Äîyour files remain completely private.</p>
                        </div>
                        <div class="feature-item">
                            <h3>üíØ Completely Free Forever</h3>
                            <p><strong>No hidden costs:</strong> This service is 100% free with no signup, registration, or payment required. We keep it free through optional advertisements. No trial periods, no premium tiers‚Äîjust upload and convert unlimited files.</p>
                        </div>
                        <div class="feature-item">
                            <h3>üì± Universal Compatibility</h3>
                            <p><strong>Works on any device:</strong> Fully responsive design works perfectly on desktop computers, laptops, tablets, and smartphones. Compatible with all modern browsers including Chrome, Firefox, Safari, and Edge. No software installation required.</p>
                        </div>
                        <div class="feature-item">
                            <h3>üéØ Wide Format Support</h3>
                            <p><strong>All major audio formats:</strong> Convert between MP3, WAV, FLAC, AAC, M4A, OGG, and WMA. Supports both lossy compressed formats (MP3, AAC) and lossless formats (FLAC, WAV) for professional quality or maximum compatibility.</p>
                        </div>
                        <div class="feature-item">
                            <h3>‚ö° Professional Quality Output</h3>
                            <p><strong>Industry-grade processing:</strong> Using FFmpeg ensures professional-quality audio conversion with proper codec implementation. Your converted files will sound exactly as they should, with no quality degradation beyond what's inherent to the target format.</p>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Sidebar Ad (Desktop only) -->
            <aside>
                <div class="ad-container" id="ad-sidebar">
                    <div>
                        üì¢ SIDEBAR AD<br>
                        <small style="font-weight: normal; font-size: 0.9rem;">
                            Desktop Only (Hidden on Mobile)<br>
                            300x600 Vertical Rectangle<br>
                            Right Column
                        </small>
                    </div>
                </div>
            </aside>
        </div>

        <footer>
            <p>&copy; 2025 Free Audio Converter. All rights reserved.</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">Fast, free, and simple audio file conversion.</p>
            <p style="margin-top: 15px; font-size: 0.9rem;">
                <a href="/formats-details.html">Audio Format Details</a> |
                <a href="/legal-disclaimer.html">Legal Disclaimer</a> |
                <a href="/file-handling.html">Privacy & File Handling</a>
            </p>
        </footer>
    </div>

    <script>
        // State
        let selectedFile = null;
        let adsConsent = false;
        let convertedFileUrl = null;

        // Check consent on page load
        window.addEventListener('DOMContentLoaded', () => {
            const consent = localStorage.getItem('adsConsent');
            if (consent === null) {
                document.getElementById('consentModal').classList.add('active');
            } else if (consent === 'true') {
                adsConsent = true;
                loadAds();
            }

            // Set default output format based on page
            const defaultFormat = 'mp3';
            if (defaultFormat) {
                document.getElementById('outputFormat').value = defaultFormat;
            }
        });

        // Consent Functions
        function acceptConsent() {
            localStorage.setItem('adsConsent', 'true');
            adsConsent = true;
            document.getElementById('consentModal').classList.remove('active');
            loadAds();
        }

        function declineConsent() {
            localStorage.setItem('adsConsent', 'false');
            adsConsent = false;
            document.getElementById('consentModal').classList.remove('active');
        }

        function loadAds() {
            console.log('Ads loaded with user consent');
            // Add your Google AdSense code here
        }

        // File Upload Handling
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const convertBtn = document.getElementById('convertBtn');
        const errorMessage = document.getElementById('errorMessage');

        // Drag and drop events
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('drag-over');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('drag-over');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('drag-over');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFileSelect(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileSelect(e.target.files[0]);
            }
        });

        function handleFileSelect(file) {
            errorMessage.classList.remove('active');

            // Validate file size (50MB limit)
            const maxSize = 50 * 1024 * 1024;
            if (file.size > maxSize) {
                errorMessage.textContent = '‚ùå File too large! Maximum file size is 50MB.';
                errorMessage.classList.add('active');
                return;
            }

            // Validate file type
            const validTypes = ['audio/mpeg', 'audio/wav', 'audio/flac', 'audio/aac', 'audio/m4a', 'audio/ogg', 'audio/x-m4a', 'audio/x-wav'];
            const validExtensions = ['.mp3', '.wav', '.flac', '.aac', '.m4a', '.ogg', '.wma'];
            const fileExtension = '.' + file.name.split('.').pop().toLowerCase();

            if (!validTypes.includes(file.type) && !validExtensions.includes(fileExtension)) {
                errorMessage.textContent = '‚ùå Invalid file type! Please upload an audio file.';
                errorMessage.classList.add('active');
                return;
            }

            selectedFile = file;
            fileName.textContent = file.name;
            fileSize.textContent = formatFileSize(file.size);
            fileInfo.classList.add('active');
            convertBtn.disabled = false;
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        // REAL Server-Side Conversion
        async function startConversion() {
            if (!selectedFile) return;

            convertBtn.disabled = true;
            document.getElementById('progressContainer').classList.add('active');
            document.getElementById('resultSection').classList.remove('active');
            document.getElementById('ad-banner-2').classList.remove('active');
            errorMessage.classList.remove('active');

            if (adsConsent) {
                document.getElementById('inlineAd').classList.add('active');
            }

            // Prepare form data
            const formData = new FormData();
            formData.append('audioFile', selectedFile);
            formData.append('format', document.getElementById('outputFormat').value);

            try {
                updateProgress(10);

                // Send to server
                const response = await fetch('/convert', {
                    method: 'POST',
                    body: formData
                }).catch(networkError => {
                    // Network/connection failure - server not reachable
                    throw new Error('Server Connection Failed');
                });

                if (!response.ok) {
                    // Server responded but conversion failed
                    let errorMsg = 'Conversion failed';
                    try {
                        const errorData = await response.json();
                        errorMsg = errorData.message || errorMsg;
                    } catch (e) {
                        // Failed to parse error response
                    }
                    throw new Error(errorMsg);
                }

                updateProgress(90);

                // Get the converted file
                const blob = await response.blob();
                convertedFileUrl = URL.createObjectURL(blob);

                updateProgress(100);

                setTimeout(() => {
                    completeConversion();
                }, 500);

            } catch (error) {
                console.error('Conversion error:', error);

                // Show clear error message to user
                if (error.message === 'Server Connection Failed') {
                    errorMessage.textContent = '‚ùå Server Connection Failed - Please ensure the server is running';
                } else {
                    errorMessage.textContent = '‚ùå ' + error.message;
                }

                errorMessage.classList.add('active');
                resetConverter();
            }
        }

        function updateProgress(percent) {
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = percent + '%';
            progressFill.textContent = Math.round(percent) + '%';
        }

        function completeConversion() {
            document.getElementById('progressContainer').classList.remove('active');
            document.getElementById('inlineAd').classList.remove('active');
            document.getElementById('resultSection').classList.add('active');

            if (adsConsent) {
                document.getElementById('ad-banner-2').classList.add('active');
            }
        }

        function downloadFile() {
            if (!convertedFileUrl) {
                errorMessage.textContent = '‚ùå No converted file available.';
                errorMessage.classList.add('active');
                return;
            }

            const outputFormat = document.getElementById('outputFormat').value;
            const originalName = selectedFile.name.split('.').slice(0, -1).join('.');
            const newFileName = `${originalName}_converted.${outputFormat}`;

            const a = document.createElement('a');
            a.href = convertedFileUrl;
            a.download = newFileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function resetConverter() {
            selectedFile = null;
            if (convertedFileUrl) {
                URL.revokeObjectURL(convertedFileUrl);
                convertedFileUrl = null;
            }
            fileInput.value = '';
            fileInfo.classList.remove('active');
            document.getElementById('progressContainer').classList.remove('active');
            document.getElementById('resultSection').classList.remove('active');
            document.getElementById('ad-banner-2').classList.remove('active');
            document.getElementById('inlineAd').classList.remove('active');
            errorMessage.classList.remove('active');
            convertBtn.disabled = true;
            updateProgress(0);
        }
    </script>
</body>
</html>
